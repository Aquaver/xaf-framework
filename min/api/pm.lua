local a=_G._XAF;local b=type(a)=="table"and a._APPDATA or nil;local c=require("filesystem")local d=require("xaf/core/xafcore"):getTableInstance()local e={C_NAME="XAF Package Manager API",C_INSTANCE=true,C_INHERIT=true,static={}}function e:initialize()local f=nil;local g=f and f.private or{}local h=f and f.public or{}g.pathRoot="io.github.aquaver"g.pathPackage=''g.pathPackages="xaf-packages"g.pathPackageBinary="_bin"g.pathPackageConfig="_config"h.checkTable=function(self)if b[g.pathPackage]==nil then return false else return true end end;h.createTable=function(self)if b[g.pathPackage]==nil then _G._XAF._APPDATA[g.pathPackage]={}return true else return false end end;h.dropTable=function(self)if b[g.pathPackage]==nil then return false else _G._XAF._APPDATA[g.pathPackage]=nil;return true end end;h.getPackagePath=function(self,i)assert(type(i)=="string","[XAF Core] Expected STRING as argument #1")local j=c.concat('/',g.pathRoot,g.pathPackages,g.pathPackage)local k=c.concat(j,g.pathPackageBinary,i)return k end;h.getPackageVersion=function(self)local l=c.concat('/',g.pathRoot,g.pathPackages,g.pathPackage,g.pathPackageConfig,"package.info")local m={}if c.exists(l)==true then m=d:loadFromFile(l)if m["package-description"]and m["package-identifier"]and m["package-index"]and m["package-owner"]and m["package-title"]and m["package-version"]and m["package-xaf"]then return m["package-version"]else error("[XAF Error] Invalid package configuration file - cannot read version")end else error("[XAF Error] Could not find configuration for package '"..g.pathPackage.."'")end end;h.getTableValue=function(self,n)assert(type(n)=="string","[XAF Core] Expected STRING as argument #1")if b[g.pathPackage]==nil then return false else return true,b[g.pathPackage][n]end end;h.setTableValue=function(self,n,o)assert(type(n)=="string","[XAF Core] Expected STRING as argument #1")if b[g.pathPackage]==nil then return false else _G._XAF._APPDATA[g.pathPackage][n]=o;return true end end;return{private=g,public=h}end;function e:extend()local p=self:initialize()local g=p.private;local h=p.public;if self.C_INHERIT==true then return{private=g,public=h}else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be inherited")end end;function e:new(q)local p=self:initialize()local g=p.private;local h=p.public;assert(type(q)=="string","[XAF Core] Expected STRING as argument #1")g.pathPackage=q;if a==nil or b==nil then error("[XAF Error] Package Manager API cannot be initialized")end;if self.C_INSTANCE==true then return h else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be instanced")end end;return e
