local a=require("xaf/graphic/component")local b=require("unicode")local c={C_NAME="Generic GUI Checkbox",C_INSTANCE=true,C_INHERIT=true,static={}}function c:initialize()local d=a:extend()local e=d and d.private or{}local f=d and d.public or{}e.eventSelect=nil;e.eventSelectArguments={}e.eventDeselect=nil;e.eventDeselectArguments={}e.label=""e.labelLength=0;e.selected=false;e.showLabel=false;f.getLabel=function(self)return e.label end;f.getSelected=function(self)return e.selected end;f.register=function(self,g)assert(type(g)=="table","[XAF Graphic] Expected TABLE as argument #1")if e.active==true then if g[1]=="touch"then local h=g[2]if h==e.renderer.getScreen()then local i=g[3]local j=g[4]local k=e.renderMode;local l=0;local m=0;local n=0;local o=0;if k<=1 then l=e.positionX;m=e.positionY;n=e.positionX+e.totalWidth-1;o=e.positionY+e.totalHeight-1 elseif k<=2 then l=e.positionX+1;m=e.positionY+1;n=e.positionX+e.totalWidth-2;o=e.positionY+e.totalHeight-2 elseif k<=3 then l=e.positionX+2;m=e.positionY+1;n=e.positionX+e.totalWidth-3;o=e.positionY+e.totalHeight-2 end;if i>=l and i<=n and(j>=m and j<=o)then if e.selected==true then local g=e.eventDeselect;local p=e.eventDeselectArguments;e.selected=false;f:view()if g then return g(table.unpack(p))end else local g=e.eventSelect;local p=e.eventSelectArguments;e.selected=true;f:view()if g then return g(table.unpack(p))end end end end end end end;f.setLabel=function(self,q)assert(type(q)~="nil","[XAF Graphic] Expected ANYTHING as argument #1")local r=tostring(q)local s=b.wlen(r)e.label=r;e.labelLength=s;if e.showLabel==true then e.totalWidth=8+s end;return true end;f.setOnDeselect=function(self,t,...)assert(type(t)=="function","[XAF Graphic] Expected FUNCTION as argument #1")local u=t;local v={...}e.eventDeselect=u;e.eventDeselectArguments=v;return true end;f.setOnSelect=function(self,t,...)assert(type(t)=="function","[XAF Graphic] Expected FUNCTION as argument #1")local u=t;local v={...}e.eventSelect=t;e.eventSelectArguments=v;return true end;f.setSelected=function(self,w)assert(type(w)=="boolean","[XAF Graphic] Expected BOOLEAN as argument #1")e.selected=w;return true end;f.view=function(self)local x=e.renderer;if x then local y=e.totalWidth;local z=e.totalHeight;local A=e.positionX;local B=e.positionY;local C=x.getBackground()local D=x.getForeground()local k=e.renderMode;if k<=1 then x.setBackground(e.colorBackground)x.setForeground(e.colorBorder)x.fill(A,B,y-1,1,'─')x.fill(A,B+z-1,y-1,1,'─')x.fill(A,B,1,z-1,'│')x.fill(A+y-1,B,1,z-1,'│')x.set(A,B,'╭')x.set(A+y-1,B,'╮')x.set(A,B+z-1,'╰')x.set(A+y-1,B+z-1,'╯')if e.showLabel==true then x.set(A+4,B,'┬')x.set(A+4,B+1,'│')x.set(A+4,B+2,'┴')end end;if k<=2 then x.setBackground(e.colorBackground)x.set(A+1,B+1,' ')x.set(A+3,B+1,' ')x.set(A+y-2,B+1,' ')if e.showLabel==true then x.set(A+5,B+1,' ')end end;if k<=3 then local E=e.selected==true and'X'or' 'local q=e.label;x.setBackground(e.colorBackground)x.setForeground(e.colorContent)x.set(A+2,B+1,E)if e.showLabel==true then x.set(A+6,B+1,q)end end;x.setBackground(C)x.setForeground(D)return true else error("[XAF Error] Component GPU renderer has not been initialized")end end;return{private=e,public=f}end;function c:extend()local F=self:initialize()local e=F.private;local f=F.public;if self.C_INHERIT==true then return{private=e,public=f}else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be inherited")end end;function c:new(G,H,I)local F=self:initialize()local e=F.private;local f=F.public;f:setPosition(G,H)e.totalWidth=I==true and 8 or 5;e.totalHeight=3;assert(type(I)=="boolean","[XAF Graphic] Expected BOOLEAN as argument #3")e.showLabel=I;if self.C_INSTANCE==true then return f else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be instanced")end end;return c
