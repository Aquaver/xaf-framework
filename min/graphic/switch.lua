local a=require("graphic/component")local b=require("unicode")local c={C_NAME="Generic GUI 2-state Switch",C_INSTANCE=true,C_INHERIT=true,static={}}function c:initialize()local d=a:extend()local e=d and d.private or{}local f=d and d.public or{}e.activeState=false;e.colorBackgroundActive=0x000000;e.colorBorderActive=0xFFFFFF;e.colorContentActive=0xFFFFFF;e.eventActive=nil;e.eventActiveArguments={}e.eventInactive=nil;e.eventInactiveArguments={}e.labelTable={}f.getActivated=function(self)return e.activeState end;f.getColorsActive=function(self)return e.colorBorderActive,e.colorBackgroundActive,e.colorContentActive end;f.getLabel=function(self)return table.unpack(e.labelTable)end;f.register=function(self,g)assert(type(g)=="table","[XAF Graphic] Expected TABLE as argument #1")if e.active==true then if g[1]=="touch"then local h=g[2]if h==e.renderer.getScreen()then local i=g[3]local j=g[4]local k=e.renderMode;local l=0;local m=0;local n=0;local o=0;if k<=1 then l=e.positionX;m=e.positionY;n=e.positionX+e.totalWidth-1;o=e.positionY+e.totalHeight-1 elseif k<=2 then l=e.positionX+1;m=e.positionY+1;n=e.positionX+e.totalWidth-2;o=e.positionY+e.totalHeight-2 elseif k<=3 then l=e.positionX+2;m=e.positionY+1;n=e.positionX+e.totalWidth-3;o=e.positionY+e.totalHeight-2 end;if i>=l and i<=n and(j>=m and j<=o)then if e.activeState==true then local g=e.eventInactive;local p=e.eventInactiveArguments;e.activeState=false;f:view()if g then return g(table.unpack(p))end else local g=e.eventActive;local p=e.eventInactiveArguments;e.activeState=true;f:view()if g then return g(table.unpack(p))end end end end end end end;f.setActivated=function(self,q)assert(type(q)=="boolean","[XAF Graphic] Expected BOOLEAN as argument #1")e.activeState=q;return true end;f.setColorsActive=function(self,r,s,t)assert(type(r)=="number","[XAF Graphic] Expected NUMBER as argument #1")assert(type(s)=="number","[XAF Graphic] Expected NUMBER as argument #2")assert(type(t)=="number","[XAF Graphic] Expected NUMBER as argument #3")if r<=0xFFFFFF and r>=0 then e.colorBorderActive=r else error("[XAF Error] Invalid component border color")end;if s<=0xFFFFFF and s>=0 then e.colorBackgroundActive=s else error("[XAF Error] Invalid component background color")end;if t<=0xFFFFFF and t>=0 then e.colorContentActive=t else error("[XAF Error] Invalid component content color")end;return true end;f.setLabel=function(self,...)local u={...}local v=0;local w=0;for x,y in ipairs(u)do local z=y;local A=z==nil and 0 or b.wlen(tostring(z))e.labelTable[x]=tostring(z)w=A>w and A or w;v=v+1 end;e.totalWidth=w+4;e.totalHeight=v+2;return true end;f.setOnActive=function(self,B,...)assert(type(B)=="function","[XAF Graphic] Expected FUNCTION as argument #1")local C=B;local D={...}e.eventActive=C;e.eventActiveArguments=D;return true end;f.setOnInactive=function(self,B,...)assert(type(B)=="function","[XAF Graphic] Expected FUNCTION as argument #1")local C=B;local D={...}e.eventInactive=B;e.eventInactiveArguments=D;return true end;f.view=function(self)local E=e.renderer;if E then local F=e.activeState;local G=F==true and e.colorBackgroundActive or e.colorBackground;local H=F==true and e.colorBorderActive or e.colorBorder;local I=F==true and e.colorContentActive or e.colorContent;local J=e.labelTable;local K=e.positionX;local L=e.positionY;local M=e.totalWidth;local N=E.getBackground()local O=E.getForeground()local P=e.totalHeight;local k=e.renderMode;if k<=1 then E.setBackground(G)E.setForeground(H)E.fill(K,L,M-1,1,'─')E.fill(K,L+P-1,M-1,1,'─')E.fill(K,L,1,P-1,'│')E.fill(K+M-1,L,1,P-1,'│')E.set(K,L,'┌')E.set(K+M-1,L,'┐')E.set(K,L+P-1,'└')E.set(K+M-1,L+P-1,'┘')end;if k<=2 then E.setBackground(G)E.fill(K+1,L+1,1,P-2,' ')E.fill(K+M-2,L+1,1,P-2,' ')end;if k<=3 then E.setBackground(G)E.setForeground(I)E.fill(K+2,L+1,M-4,P-2,' ')for x,y in ipairs(J)do E.set(K+2,L+x,y)end end;E.setBackground(N)E.setForeground(O)return true else error("[XAF Error] Component GPU renderer has not been initialized")end end;return{private=e,public=f}end;function c:extend()local Q=self:initialize()local e=Q.private;local f=Q.public;if self.C_INHERIT==true then return{private=e,public=f}else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be inherited")end end;function c:new(R,S)local Q=self:initialize()local e=Q.private;local f=Q.public;f:setPosition(R,S)e.totalWidth=4;e.totalHeight=2;if self.C_INSTANCE==true then return f else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be instanced")end end;return c
