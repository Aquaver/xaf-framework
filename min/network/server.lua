local a={C_NAME="Abstract Network Server",C_INSTANCE=false,C_INHERIT=true,static={}}function a:initialize()local b=nil;local c=b and b.private or{}local d=b and b.public or{}c.active=false;c.eventStart=nil;c.eventStartArguments={}c.eventStop=nil;c.eventStopArguments={}c.componentModem=nil;c.port=1;d.getModem=function(self)return c.componentModem end;d.getPort=function(self)return c.port end;d.isRunning=function(self)return c.active end;d.process=function(self)error("[XAF Error] Server processing function has not been initialized - running default")end;d.setModem=function(self,e)assert(type(e)=="table","[XAF Network] Expected TABLE as argument #1")if e.type=="modem"then c.componentModem=e else error("[XAF Error] Invalid network modem component")end;return true end;d.setOnStart=function(self,f,...)assert(type(f)=="function","[XAF Network] Expected FUNCTION as argument #1")local g=f;local h={...}c.eventStart=g;c.eventStartArguments=h;return true end;d.setOnStop=function(self,f,...)assert(type(f)=="function","[XAF Network] Expected FUNCTION as argument #1")local g=f;local h={...}c.eventStop=g;c.eventStopArguments=h;return true end;d.setPort=function(self,i)assert(type(i)=="number","[XAF Network] Expected NUMBER as argument #1")if i>=1 and i<=65535 then c.port=i else error("[XAF Error] Invalid port number - must be a positive integer up to 65535")end;return true end;d.start=function(self)local j=c.eventStart;local k=c.eventStartArguments;local e=c.componentModem;local i=c.port;if c.active==true then error("[XAF Error] Server is already started")end;if e then if e.isOpen(i)==false then c.active=true;e.open(i)end else error("[XAF Error] Server network modem component has not been initialized")end;if j then return j(table.unpack(k))end end;d.stop=function(self)local j=c.eventStop;local k=c.eventStopArguments;local e=c.componentModem;local i=c.port;if c.active==false then error("[XAF Error] Server is already stopped")end;if e then if e.isOpen(i)==true then c.active=false;e.close(i)end else error("[XAF Error] Server network modem component has not been initialized")end;if j then return j(table.unpack(k))end end;return{private=c,public=d}end;function a:extend()local l=self:initialize()local c=l.private;local d=l.public;if self.C_INHERIT==true then return{private=c,public=d}else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be inherited")end end;function a:new()local l=self:initialize()local c=l.private;local d=l.public;if self.C_INSTANCE==true then return d else error("[XAF Error] Class '"..tostring(self.C_NAME).."' cannot be instanced")end end;return a
