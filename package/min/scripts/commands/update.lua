local a,b=...local c=table.remove(a,1)local d=require("component")local e=require("utility/httpstream")local f=require("core/xafcore")local g=f:getExecutorInstance()if b.h==true or b.help==true then print("-----------------------------------------------")print("-- Extensible Application Framework - Manual --")print("-----------------------------------------------")print("  >> NAME")print("    >> xaf update - Automated XAF update downloader and installer")print()print("  >> SYNOPSIS")print("    >> xaf update")print("    >> xaf update [-h | --help]")print("    >> xaf update <version>")print()print("  >> DESCRIPTION")print("    >> This script is used in downloading and installing available package updates. It downloads installer program from specified version release and automatically executes it. The user is able to abort the process during installation.")os.exit()end;if c==nil then print("---------------------------------------------------")print("-- Extensible Application Framework - Controller --")print("---------------------------------------------------")print("  >> Invalid version identifier")print("  >> Use correct 'xaf update <version>' command syntax")print("  >> Use '-h' or '--help' option for command help")os.exit()end;if d.isAvailable("internet")==false then print("---------------------------------------------------")print("-- Extensible Application Framework - Controller --")print("---------------------------------------------------")print("  >> Internet card component not found")print("  >> Update process has been interrupted")os.exit()else print("---------------------------------------------------")print("-- Extensible Application Framework - Controller --")print("---------------------------------------------------")print("  >> Internet card component is available, continuing...")print("  >> Selected release version: "..c)print("  >> Trying to connect to project repository...")end;local h="https://raw.githubusercontent.com/Aquaver/xaf-framework/"local i="/installer.lua"local j=h..c..i;local k=d.getPrimary("internet")local l=e:new(k,j)if l:connect()==true then local m=''local n=nil;for o in l:getData()do m=m..o end;l:disconnect()n=load(m)print("    >> Loading installer...")g:run(n)else print("    >> Cannot connect to project repository")print("    >> Ensure the version identifier ("..c..") is correct")print("    >> Try running 'xaf update' again")end
